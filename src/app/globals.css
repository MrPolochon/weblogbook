@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --foreground: #e2e8f0;
  --background: #0f172a;
  --accent-gradient: linear-gradient(135deg, #0ea5e9 0%, #6366f1 100%);
  --card-shine: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 50%);
}

/* Smooth scrolling */
html {
  scroll-behavior: smooth;
}

body {
  color: var(--foreground);
  background: var(--background);
  min-height: 100vh;
  font-feature-settings: "cv02", "cv03", "cv04", "cv11";
}

/* Subtle background pattern */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: 
    radial-gradient(ellipse at 20% 30%, rgba(14, 165, 233, 0.08) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 70%, rgba(99, 102, 241, 0.06) 0%, transparent 50%);
  pointer-events: none;
  z-index: -1;
}

/* Mode admin : fond bleuté pour distinguer l’interface */
body.admin-mode {
  background: #1a2744;
}

/* ========== MODE CLAIR ATC (par défaut) ========== */
body.atc-admin-bg,
body.atc-normal-bg,
body.atc-light.atc-admin-bg,
body.atc-light.atc-normal-bg {
  background: #f8fafc;
  color: #0f172a;
}
body.atc-normal-bg:not(.atc-dark),
body.atc-light.atc-normal-bg {
  background: #94a3b8;
}

/* Cartes et formulaires ATC mode clair */
body.atc-admin-bg .card,
body.atc-normal-bg .card,
body.atc-light .card {
  background-color: #ffffff;
  border-color: #e2e8f0;
}
body.atc-admin-bg .label,
body.atc-normal-bg .label,
body.atc-light .label {
  color: #1e293b;
}
body.atc-admin-bg .input,
body.atc-normal-bg .input,
body.atc-light .input {
  background-color: #f1f5f9;
  border-color: #cbd5e1;
  color: #0f172a;
}
body.atc-admin-bg .input::placeholder,
body.atc-normal-bg .input::placeholder,
body.atc-light .input::placeholder {
  color: #64748b;
}

/* ========== MODE SOMBRE ATC ========== */
body.atc-dark.atc-admin-bg,
body.atc-dark.atc-normal-bg {
  background: #0f172a;
  color: #e2e8f0;
}

/* Header ATC mode sombre */
body.atc-dark .atc-header {
  background: rgba(15, 23, 42, 0.95) !important;
  border-color: #334155 !important;
}
body.atc-dark .atc-header * {
  color: #e2e8f0;
}
body.atc-dark .atc-header a:hover,
body.atc-dark .atc-header button:hover {
  background-color: #1e293b !important;
}
body.atc-dark .atc-header .atc-link-active {
  background-color: #0c4a6e !important;
  color: #7dd3fc !important;
}

/* Sidebar ATC mode sombre */
body.atc-dark .atc-sidebar {
  background-color: #1e293b !important;
  border-color: #334155 !important;
}
body.atc-dark .atc-sidebar * {
  color: #cbd5e1;
}
body.atc-dark .atc-sidebar a:hover {
  background-color: #334155 !important;
  color: #f1f5f9 !important;
}

/* Cartes ATC mode sombre */
body.atc-dark .card {
  background-color: #1e293b !important;
  border-color: #334155 !important;
}
body.atc-dark .card-light {
  background-color: #0f172a !important;
  border-color: #1e293b !important;
}

/* Labels et inputs mode sombre */
body.atc-dark .label {
  color: #cbd5e1 !important;
}
body.atc-dark .input {
  background-color: #0f172a !important;
  border-color: #475569 !important;
  color: #f1f5f9 !important;
}
body.atc-dark .input::placeholder {
  color: #64748b !important;
}

/* Textes divers mode sombre */
body.atc-dark .text-slate-600,
body.atc-dark .text-slate-700,
body.atc-dark .text-slate-800,
body.atc-dark .text-slate-900 {
  color: #cbd5e1 !important;
}
body.atc-dark .bg-white,
body.atc-dark .bg-slate-50,
body.atc-dark .bg-slate-100 {
  background-color: #1e293b !important;
}
body.atc-dark .bg-slate-200 {
  background-color: #334155 !important;
}
body.atc-dark .border-slate-200,
body.atc-dark .border-slate-300 {
  border-color: #475569 !important;
}

/* Badges et tags mode sombre */
body.atc-dark .bg-sky-100 {
  background-color: #0c4a6e !important;
}
body.atc-dark .text-sky-800 {
  color: #7dd3fc !important;
}
body.atc-dark .bg-emerald-100 {
  background-color: #064e3b !important;
}
body.atc-dark .text-emerald-800 {
  color: #6ee7b7 !important;
}
body.atc-dark .bg-amber-100,
body.atc-dark .bg-orange-100 {
  background-color: #78350f !important;
}
body.atc-dark .text-amber-800,
body.atc-dark .text-orange-800,
body.atc-dark .text-orange-700 {
  color: #fcd34d !important;
}
body.atc-dark .bg-red-100 {
  background-color: #7f1d1d !important;
}
body.atc-dark .text-red-800,
body.atc-dark .text-red-700 {
  color: #fca5a5 !important;
}

/* Clignotement rapide pour la sidebar ATC « À traiter » */
@keyframes blink-fast {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.55; }
}
.animate-blink-fast {
  animation: blink-fast 0.5s ease-in-out infinite;
}

/* Animations supplémentaires */
@keyframes fade-in {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes slide-in-right {
  from { opacity: 0; transform: translateX(20px); }
  to { opacity: 1; transform: translateX(0); }
}
@keyframes pulse-soft {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}
@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
@keyframes glow {
  0%, 100% { box-shadow: 0 0 20px rgba(14, 165, 233, 0.3); }
  50% { box-shadow: 0 0 40px rgba(14, 165, 233, 0.5); }
}

/* Animation nuages */
@keyframes cloud-move {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(calc(100vw + 100%)); }
}

/* Animation avion qui traverse */
@keyframes fly-across {
  0% { transform: translateX(-100px); opacity: 0; }
  10% { opacity: 1; }
  90% { opacity: 1; }
  100% { transform: translateX(calc(100vw + 100px)); opacity: 0; }
}

/* Animation étoiles scintillantes */
@keyframes twinkle {
  0%, 100% { opacity: 0.2; transform: scale(1); }
  50% { opacity: 0.8; transform: scale(1.2); }
}

/* Animation flottante pour le logo */
@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

.animate-fade-in {
  animation: fade-in 0.3s ease-out forwards;
}
.animate-cloud {
  animation: cloud-move linear infinite;
}
.animate-fly-across {
  animation: fly-across 8s ease-in-out forwards;
}
.animate-twinkle {
  animation: twinkle ease-in-out infinite;
}
.animate-float {
  animation: float 4s ease-in-out infinite;
}
.animate-slide-in {
  animation: slide-in-right 0.3s ease-out forwards;
}
.animate-pulse-soft {
  animation: pulse-soft 2s ease-in-out infinite;
}
.animate-shimmer {
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
  background-size: 200% 100%;
  animation: shimmer 2s infinite;
}
.animate-glow {
  animation: glow 2s ease-in-out infinite;
}

/* Masquer la scrollbar tout en gardant le défilement (nav ATC) */
.scrollbar-hide {
  scrollbar-width: none;
  -ms-overflow-style: none;
}
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* Custom scrollbar for modern look */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
::-webkit-scrollbar-track {
  background: rgba(30, 41, 59, 0.5);
  border-radius: 4px;
}
::-webkit-scrollbar-thumb {
  background: rgba(100, 116, 139, 0.5);
  border-radius: 4px;
  transition: background 0.2s;
}
::-webkit-scrollbar-thumb:hover {
  background: rgba(100, 116, 139, 0.8);
}

/* Selection color */
::selection {
  background: rgba(14, 165, 233, 0.3);
  color: #f1f5f9;
}

/* Focus visible for accessibility */
:focus-visible {
  outline: 2px solid rgba(14, 165, 233, 0.5);
  outline-offset: 2px;
}

/* Table improvements */
table {
  border-collapse: separate;
  border-spacing: 0;
}
th {
  @apply text-left text-xs font-semibold uppercase tracking-wider text-slate-400;
}
td {
  @apply text-sm text-slate-300;
}
tbody tr {
  @apply transition-colors duration-150;
}
tbody tr:hover {
  @apply bg-slate-800/30;
}

/* Link hover effect */
a:not(.btn):not([class*="rounded"]) {
  @apply transition-colors duration-200;
}

/* Dividers */
hr {
  @apply border-slate-700/50;
}

@layer components {
  .btn {
    @apply inline-flex items-center justify-center rounded-xl px-4 py-2.5 text-sm font-semibold transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 disabled:opacity-50 disabled:pointer-events-none transform active:scale-[0.98];
  }
  .btn-primary {
    @apply btn bg-gradient-to-r from-sky-600 to-sky-500 text-white hover:from-sky-500 hover:to-sky-400 focus:ring-sky-500 shadow-lg shadow-sky-500/25 hover:shadow-sky-500/40;
  }
  .btn-secondary {
    @apply btn bg-slate-700/80 text-slate-200 hover:bg-slate-600 focus:ring-slate-500 border border-slate-600/50;
  }
  .btn-danger {
    @apply btn bg-gradient-to-r from-red-600 to-red-500 text-white hover:from-red-500 hover:to-red-400 focus:ring-red-500 shadow-lg shadow-red-500/25 hover:shadow-red-500/40;
  }
  .btn-success {
    @apply btn bg-gradient-to-r from-emerald-600 to-emerald-500 text-white hover:from-emerald-500 hover:to-emerald-400 focus:ring-emerald-500 shadow-lg shadow-emerald-500/25 hover:shadow-emerald-500/40;
  }
  .input {
    @apply block w-full rounded-xl border border-slate-600/60 bg-slate-800/60 px-4 py-2.5 text-slate-100 placeholder-slate-500 transition-all duration-200 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/30 focus:bg-slate-800/80 backdrop-blur-sm;
  }
  .card {
    @apply rounded-2xl border border-slate-700/40 bg-slate-800/40 backdrop-blur-sm p-5 sm:p-6 overflow-x-auto sm:overflow-visible shadow-xl shadow-slate-900/20 transition-all duration-300;
  }
  .card-hover {
    @apply card hover:border-slate-600/60 hover:bg-slate-800/50 hover:shadow-2xl hover:shadow-slate-900/30;
  }
  .card-glow {
    @apply card relative overflow-hidden;
  }
  .card-glow::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(14, 165, 233, 0.5), transparent);
  }
  .label {
    @apply block text-sm font-medium text-slate-300 mb-1.5;
  }
  /* Glass morphism effect */
  .glass {
    @apply bg-slate-800/30 backdrop-blur-lg border border-slate-700/30;
  }
  /* Gradient text */
  .text-gradient {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-sky-400 to-indigo-400;
  }
  /* Subtle hover lift */
  .hover-lift {
    @apply transition-all duration-300 hover:-translate-y-1 hover:shadow-xl;
  }
  /* Badge styles */
  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }
  .badge-primary {
    @apply badge bg-sky-500/20 text-sky-300 border border-sky-500/30;
  }
  .badge-success {
    @apply badge bg-emerald-500/20 text-emerald-300 border border-emerald-500/30;
  }
  .badge-warning {
    @apply badge bg-amber-500/20 text-amber-300 border border-amber-500/30;
  }
  .badge-danger {
    @apply badge bg-red-500/20 text-red-300 border border-red-500/30;
  }
}

@media (max-width: 640px) {
  .card table {
    min-width: 640px;
  }
}
